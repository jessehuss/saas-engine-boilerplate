---
import { getCollection } from 'astro:content';
import { loadLayout } from '../../lib/templateLoader';
import siteConfig from '../../config/site.config';
import BlogCard from '../../components/BlogCard.astro';

const BaseLayout = await loadLayout('BaseLayout');
const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const primaryColor = siteConfig.primaryColor;
---

<BaseLayout siteConfig={siteConfig} title="Blog" description="Read our latest news and insights">
  <section class={`py-32 ${siteConfig.template === 'dark' ? 'bg-slate-950' : siteConfig.template === 'gradient' ? 'bg-gradient-to-br from-gray-50 to-gray-100' : siteConfig.template === 'playful' ? 'bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50' : 'bg-gray-50'}`}>
    <div class="container-custom">
      <div class="text-center mb-20">
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold mb-6" style={`color: ${primaryColor};`}>Blog</h1>
        <p class={`text-xl ${siteConfig.template === 'dark' ? 'text-slate-400' : 'text-gray-600'} max-w-2xl mx-auto`}>
          Stay up to date with our latest news, insights, and updates
        </p>
      </div>
      
      {sortedPosts.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {sortedPosts.map((post) => (
            <BlogCard post={post} />
          ))}
        </div>
      ) : (
        <div class="text-center py-20">
          <p class={`text-lg ${siteConfig.template === 'dark' ? 'text-slate-400' : 'text-gray-600'}`}>No posts yet. Check back soon!</p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>


